<svg viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="600" fill="#f5f7fa" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">Arquitetura da Plataforma de Marketing de Afiliados</text>
  
  <!-- Client Side -->
  <rect x="50" y="100" width="200" height="120" rx="10" ry="10" fill="#e1f5fe" stroke="#0288d1" stroke-width="2"/>
  <text x="150" y="125" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#0288d1">Frontend (React/Next.js)</text>
  <rect x="70" y="140" width="160" height="25" rx="5" ry="5" fill="#b3e5fc" stroke="#0288d1" stroke-width="1"/>
  <text x="150" y="157" font-family="Arial" font-size="12" text-anchor="middle">Dashboard Anunciante</text>
  <rect x="70" y="175" width="160" height="25" rx="5" ry="5" fill="#b3e5fc" stroke="#0288d1" stroke-width="1"/>
  <text x="150" y="192" font-family="Arial" font-size="12" text-anchor="middle">Portal do Afiliado</text>
  
  <!-- API Gateway -->
  <rect x="300" y="130" width="160" height="60" rx="10" ry="10" fill="#e8f5e9" stroke="#388e3c" stroke-width="2"/>
  <text x="380" y="165" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#388e3c">API Gateway</text>
  
  <!-- Tracking Scripts -->
  <rect x="50" y="250" width="200" height="80" rx="10" ry="10" fill="#fff3e0" stroke="#f57c00" stroke-width="2"/>
  <text x="150" y="280" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#f57c00">Tracking Scripts</text>
  <text x="150" y="300" font-family="Arial" font-size="12" text-anchor="middle" fill="#f57c00">(Sites dos Anunciantes)</text>
  
  <!-- Microservices -->
  <rect x="300" y="220" width="280" height="240" rx="10" ry="10" fill="#f5f5f5" stroke="#757575" stroke-width="2"/>
  <text x="440" y="240" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#757575">Microserviços</text>
  
  <!-- Individual Services -->
  <rect x="320" y="260" width="115" height="60" rx="5" ry="5" fill="#e8eaf6" stroke="#3f51b5" stroke-width="1.5"/>
  <text x="377" y="290" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#3f51b5">Auth Service</text>
  
  <rect x="445" y="260" width="115" height="60" rx="5" ry="5" fill="#e8eaf6" stroke="#3f51b5" stroke-width="1.5"/>
  <text x="502" y="290" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#3f51b5">Campaign Service</text>
  
  <rect x="320" y="330" width="115" height="60" rx="5" ry="5" fill="#e8eaf6" stroke="#3f51b5" stroke-width="1.5"/>
  <text x="377" y="360" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#3f51b5">Tracking Service</text>
  
  <rect x="445" y="330" width="115" height="60" rx="5" ry="5" fill="#e8eaf6" stroke="#3f51b5" stroke-width="1.5"/>
  <text x="502" y="360" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#3f51b5">Commission Service</text>
  
  <rect x="380" y="400" width="115" height="40" rx="5" ry="5" fill="#e8eaf6" stroke="#3f51b5" stroke-width="1.5"/>
  <text x="437" y="425" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#3f51b5">Reporting Service</text>
  
  <!-- Event Processor -->
  <rect x="300" y="480" width="280" height="60" rx="10" ry="10" fill="#ede7f6" stroke="#673ab7" stroke-width="2"/>
  <text x="440" y="515" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#673ab7">Event Processor (Kafka)</text>
  
  <!-- Data Storage -->
  <rect x="650" y="220" width="200" height="240" rx="10" ry="10" fill="#f5f5f5" stroke="#757575" stroke-width="2"/>
  <text x="750" y="240" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#757575">Armazenamento</text>
  
  <rect x="670" y="260" width="160" height="50" rx="5" ry="5" fill="#e1bee7" stroke="#7b1fa2" stroke-width="1.5"/>
  <text x="750" y="290" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#7b1fa2">PostgreSQL</text>
  
  <rect x="670" y="320" width="160" height="50" rx="5" ry="5" fill="#bbdefb" stroke="#1976d2" stroke-width="1.5"/>
  <text x="750" y="350" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#1976d2">Redis Cache</text>
  
  <rect x="670" y="380" width="160" height="50" rx="5" ry="5" fill="#ffccbc" stroke="#e64a19" stroke-width="1.5"/>
  <text x="750" y="410" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#e64a19">MongoDB (Events)</text>
  
  <!-- External Integrations -->
  <rect x="650" y="480" width="200" height="60" rx="10" ry="10" fill="#dcedc8" stroke="#689f38" stroke-width="2"/>
  <text x="750" y="500" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#689f38">Integrações Externas</text>
  <text x="750" y="520" font-family="Arial" font-size="12" text-anchor="middle">(E-commerce, Pagamentos)</text>
  
  <!-- Connections -->
  <!-- Frontend to API Gateway -->
  <path d="M250 160 L300 160" stroke="#757575" stroke-width="2" fill="none"/>
  <polygon points="295,155 305,160 295,165" fill="#757575"/>
  
  <!-- Tracking to Event Processor -->
  <path d="M150 330 L150 510 L300 510" stroke="#f57c00" stroke-width="2" fill="none"/>
  <polygon points="295,505 305,510 295,515" fill="#f57c00"/>
  
  <!-- API Gateway to Microservices -->
  <path d="M380 190 L380 220" stroke="#388e3c" stroke-width="2" fill="none"/>
  <polygon points="375,215 380,225 385,215" fill="#388e3c"/>
  
  <!-- Microservices to Event Processor -->
  <path d="M440 460 L440 480" stroke="#673ab7" stroke-width="2" fill="none"/>
  <polygon points="435,475 440,485 445,475" fill="#673ab7"/>
  
  <!-- Microservices to Data Storage -->
  <path d="M580 340 L650 340" stroke="#7b1fa2" stroke-width="2" fill="none"/>
  <polygon points="645,335 655,340 645,345" fill="#7b1fa2"/>
  
  <!-- Event Processor to Data Storage -->
  <path d="M580 510 L630 510 L630 405 L670 405" stroke="#e64a19" stroke-width="2" fill="none"/>
  <polygon points="665,400 675,405 665,410" fill="#e64a19"/>
  
  <!-- External Integrations Connection -->
  <path d="M510 360 L590 360 L590 450 L750 450 L750 480" stroke="#689f38" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  <polygon points="745,475 750,485 755,475" fill="#689f38"/>
</svg>
